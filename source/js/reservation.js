document.getElementById("reservation-form").addEventListener("submit",(function(e){e.preventDefault();let t=document.getElementById("form-output-global");if(t.classList.remove("error","success"),this.classList.add("form-in-process"),t.innerHTML='<p><span class="icon text-middle fa fa-circle-o-notch fa-spin icon-xxs"></span><span>Sending</span></p>',t.classList.add("active"),this.checkValidity()){const e=grecaptcha.getResponse();if(""===e)t.innerHTML=' <p class="snackbars-left"><span class="icon icon-xxs mdi mdi-alert-outline text-middle"></span><span>reCAPTCHA is not verified</span></p>',t.classList.add("error"),setTimeout((()=>t.classList.remove("active","error")),2e3);else{const s="https://europe-central2-luxurystayskapanaplovdiv.cloudfunctions.net/reservationRequest";let n=document.getElementById("name").value,a=document.getElementById("phone").value,o=document.getElementById("email").value,i=document.getElementById("message").value,l=document.getElementById("adults").value,c=document.getElementById("children").value,d=document.getElementById("checkin_date").value,r=document.getElementById("checkout_date").value;d=dateFormatChanger(d),r=dateFormatChanger(r),d=new Date(d.getTime()-6e4*d.getTimezoneOffset()),r=new Date(r.getTime()-6e4*r.getTimezoneOffset()),d=d.toISOString().split("T")[0],r=r.toISOString().split("T")[0];const m=JSON.stringify({name:n,phone:a,email:o,dateIn:d,dateOut:r,adults:l,children:c,message:i,grecaptcha_response:e});fetch(s,{method:"POST",body:m}).then((e=>{e.ok?(t.innerHTML=' <p class="snackbars-left"><span class="icon text-middle mdi mdi-check icon-xxs"></span><span>Successfully sent!</span></p>',t.classList.add("success"),this.reset(),setTimeout((()=>t.classList.remove("active","success")),2e3),window.open(`https://www.booking.com/hotel/bg/luxury-stays-kapana-plovdiv.html?aid=390156&label=duc511jc-1FCAsobEIbbHV4dXJ5c3RheXMtaW1wZXJpYWwtc3VpdGVzSDNYA2gXiAEBmAExuAEYyAEP2AEB6AEB-AECiAIBqAIEuAKZvrS_BsACAdICJGEyNzIzY2ZiLTMyOWItNGI2Ni04MjA1LTZlNmZlMjFlZWI3NtgCBeACAQ&sid=572c465057440bc89a55a1e29348ab72&all_sr_blocks=1376798401_409804318_2_0_0_857973&checkin=${d}&checkout=${r}&dest_id=13767984&dest_type=hotel&dist=0&group_adults=${l}&group_children=${c}&hapos=1&highlighted_blocks=1376798401_409804318_2_0_0_857973&hpos=1&matching_block_id=1376798401_409804318_2_0_0_857973&no_rooms=1&req_adults=${l}&req_children=${c}&room1=A%2CA&sb_price_type=total&sr_order=popularity&sr_pri_blocks=1376798401_409804318_2_0_0_857973_17157&srepoch=1743593322&srpvid=b99e50b58c8803cb&type=total&ucfs=1&`,"_blank")):(t.innerHTML=' <p class="snackbars-left"><span class="icon icon-xxs mdi mdi-alert-outline text-middle"></span><span>reCAPTCHA is not verified</span></p>',t.classList.add("error"),setTimeout((()=>t.classList.remove("active","error")),2e3))})).catch((()=>{t.innerHTML=' <p class="snackbars-left"><span class="icon icon-xxs mdi mdi-alert-outline text-middle"></span><span>Aw, snap! Something went wrong.</span></p>',t.classList.add("error"),setTimeout((()=>t.classList.remove("active","error")),2e3)}))}}else t.innerHTML=' <p class="snackbars-left"><span class="icon icon-xxs mdi mdi-alert-outline text-middle"></span><span>Please, enter correct data.</span></p>',t.classList.add("error"),setTimeout((()=>t.classList.remove("active","error")),2e3)})),document.getElementById("children").addEventListener("change",(e=>{const t=document.querySelector("#adults"),s=document.getElementById("children").value;if(1==s||2==s){const e=t.options;for(let s=0;s<e.length;s++)3==e[s].value?t.options[s].disabled=!0:t.options[s].disabled=!1}else if(3==s){const e=t.options;for(let t=0;t<e.length;t++)1==e[t].value?e[t].disabled=!1:e[t].disabled=!0}else{const e=t.options;for(let s=0;s<e.length;s++)t.options[s].disabled=!1}})),document.getElementById("adults").addEventListener("change",(e=>{const t=document.querySelector("#children"),s=document.getElementById("adults").value;if(2==s){const e=t.options;for(let s=0;s<e.length;s++)3==e[s].value?t.options[s].disabled=!0:t.options[s].disabled=!1}else if(3==s){const e=t.options;for(let t=0;t<e.length;t++)0==e[t].value?e[t].disabled=!1:e[t].disabled=!0}else{const e=t.options;for(let s=0;s<e.length;s++)t.options[s].disabled=!1}}));const months=["January","February","March","April","May","June","July","August","September","October","November","December"];function dateFormatChanger(e){return(e=e.split(" "))[1]=e[1].replace(",",""),new Date(e[2]+"-"+(months.indexOf(e[1])+1)+"-"+e[0])}